<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="google-site-verification" content="CcQWHZSra56gJoiG2L4xv8GjL2z_C1txoouzKlR4ASk"/><style data-href="/styles.d58a854661ffccf3756e.css">code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px #fff;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><meta name="generator" content="Gatsby 2.26.1"/><style data-styled="bvxbLs cdEpUV iSYTTb gDybXa dIQAlg cMSLWU ijxtcw iQIAOc dmFQlA hGedeg cpnbXC ipkTNK eNlzGc ukmsj bGukrS iMnMOA cLxazo iJKMsj cBVFwB fDOfVi eAaXEV" data-styled-version="4.4.1">
/* sc-component-id: sc-bdVaJa */
.cBVFwB{color:#3e465b;font-size:22px;font-weight:700;line-height:1.5;margin:25px 50px 15px;}
/* sc-component-id: sc-global-3434470545 */
@import url("https://fonts.googleapis.com/css?family=Roboto:400,700"); html{line-height:1.15;-webkit-text-size-adjust:100%;} body{margin:0;} main{display:block;} h1{font-size:2em;margin:0.67em 0;} hr{box-sizing:content-box;height:0;overflow:visible;} pre{font-family:monospace,monospace;font-size:1em;} a{background-color:transparent;} abbr[title]{border-bottom:none;-webkit-text-decoration:underline;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted;} b,strong{font-weight:bolder;} code,kbd,samp{font-family:monospace,monospace;font-size:1em;} small{font-size:80%;} sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline;} sub{bottom:-0.25em;} sup{top:-0.5em;} img{border-style:none;} button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0;} button,input{overflow:visible;} button,select{text-transform:none;} button,[type="button"],[type="reset"],[type="submit"]{-webkit-appearance:button;} button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0;} button:-moz-focusring,[type="button"]:-moz-focusring,[type="reset"]:-moz-focusring,[type="submit"]:-moz-focusring{outline:1px dotted ButtonText;} fieldset{padding:0.35em 0.75em 0.625em;} legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal;} progress{vertical-align:baseline;} textarea{overflow:auto;} [type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0;} [type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{height:auto;} [type="search"]{-webkit-appearance:textfield;outline-offset:-2px;} [type="search"]::-webkit-search-decoration{-webkit-appearance:none;} ::-webkit-file-upload-button{-webkit-appearance:button;font:inherit;} details{display:block;} summary{display:list-item;} template{display:none;} [hidden]{display:none;} *,*:before,*:after{box-sizing:inherit;} html{font-size:62.5%;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;box-sizing:border-box;} body{background:#f9fafc;font-family:'Open Sans',sans-serif;line-height:1.5;padding:50px 0;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;} img{max-width:100%;} .gatsby-highlight{border-bottom:1px solid #e0e6ed;border-top:1px solid #e0e6ed;margin:15px -100px;padding:0;} .gatsby-highlight pre[class*="language-"]{margin:0;padding:25px 100px;} pre[class*="language-"]{background:rgba(245,245,245,1);color:rgb(65,76,94);} @media only screen and (max-width:870px){.gatsby-highlight{margin:15px -15px;}.gatsby-highlight pre[class*="language-"]{padding:25px;}}
/* sc-component-id: sc-htpNat */
.bvxbLs{margin:0 auto;max-width:1080px;}
/* sc-component-id: sc-ifAKCX */
.cMSLWU{margin-top:15px;text-align:center;}
/* sc-component-id: sc-EHOje */
.ijxtcw{border:1px solid #bfc8d2;border-radius:15px;color:#3e465b;display:inline-block;margin:5px;padding:5px 10px;-webkit-text-decoration:none;text-decoration:none;} .ijxtcw svg{display:inline-block;height:20px;stroke:#6e849c;vertical-align:middle;width:20px;} .ijxtcw:hover{border-color:#3e465b;}
/* sc-component-id: sc-bZQynM */
.iSYTTb{color:#3e465b;font-size:35px;line-height:1.5;margin:0;padding:0 30px;text-align:center;}
/* sc-component-id: sc-gzVnrw */
.ipkTNK{color:#666d71;display:block;font-size:1.6em;margin:50px 0 0 0;text-align:center;}
/* sc-component-id: sc-htoDjs */
.dIQAlg{color:#666d71;display:block;font-size:1.6em;margin:50px 0 0 0;text-align:center;margin:0;}
/* sc-component-id: sc-dnqmqq */
.gDybXa{color:#3498db;-webkit-text-decoration:none;text-decoration:none;}
/* sc-component-id: sc-iwsKbI */
.cdEpUV{margin:0 auto;max-width:650px;padding:0 50px 50px;text-align:center;}
/* sc-component-id: sc-gZMcBi */
.cLxazo{color:#65738c;font-size:16px;} .cLxazo a{color:#3498db;font-weight:700;-webkit-text-decoration:none;text-decoration:none;} .cLxazo a:hover{-webkit-text-decoration:underline;text-decoration:underline;} .cLxazo h1{color:#3e465b;font-size:30px;font-weight:700;line-height:1.5;margin:25px 50px 15px;} .cLxazo h2{color:#3e465b;font-size:22px;font-weight:700;line-height:1.5;margin:25px 50px 15px;} .cLxazo h3{color:#3e465b;font-size:17px;font-weight:700;line-height:1.5;margin:25px 50px 15px;} .cLxazo h4{color:#3e465b;font-weight:700;line-height:1.5;margin:25px 50px 15px;} .cLxazo h5,.cLxazo h6{color:#3e465b;font-weight:700;line-height:1.5;margin:25px 50px 15px;} .cLxazo p{line-height:1.7;margin:15px 50px;} .cLxazo blockquote{border-left:5px solid #e0e6ed;line-height:1.7;margin:15px 50px 15px 75px;padding:10px 10px 10px 15px;} .cLxazo blockquote p{margin:0;} .cLxazo ul,.cLxazo ol{line-height:1.7;margin:15px 0;padding:0 50px 0 100px;} .cLxazo ul p,.cLxazo ol p,.cLxazo ul ul,.cLxazo ol ul,.cLxazo ul ol,.cLxazo ol ol{margin:0;} .cLxazo ul ul,.cLxazo ol ul,.cLxazo ul ol,.cLxazo ol ol{padding:0 0 0 30px;} .cLxazo img{margin:15px 0;}
/* sc-component-id: sc-gqjmRU */
.iMnMOA h1{color:#3e465b;font-size:35px;line-height:1.5;margin:0;padding:0 30px;text-align:center;} .iMnMOA p{color:#666d71;display:block;font-size:1.6em;margin:0;text-align:center;} .iMnMOA span{background:#9c9da3;display:block;margin:50px auto;height:1px;width:150px;}
/* sc-component-id: sc-VigVT */
.bGukrS{border:1px solid #bfc8d2;border-radius:25px;color:#3e465b;display:inline-block;font-size:10px;font-weight:700;margin:0 10px;padding:5px 15px;-webkit-text-decoration:none;text-decoration:none;text-transform:uppercase;} .bGukrS:hover{border-color:#000;}
/* sc-component-id: sc-jTzLTM */
.iQIAOc{background:#fff;border:1px solid #e0e6ed;box-shadow:0 1px 5px rgba(0,0,0,0.05);margin-bottom:30px;padding:75px 100px;} @media only screen and (max-width:870px){.iQIAOc{border-left:none;border-right:none;padding:75px 15px;}}
/* sc-component-id: sc-jzJRlG */
.eAaXEV{margin-top:50px;text-align:center;}
/* sc-component-id: sc-cSHVUG */
.iJKMsj{margin-top:50px;text-align:center;}
/* sc-component-id: sc-kAzzGY */
.fDOfVi{border:1px solid #bfc8d2;border-radius:15px;display:inline-block;margin:5px;padding:5px 15px;-webkit-text-decoration:none;text-decoration:none;} .fDOfVi svg{display:inline-block;height:20px;stroke:#6e849c;vertical-align:middle;width:20px;} .fDOfVi:hover{border-color:#3e465b;}
/* sc-component-id: sc-chPdSV */
.ukmsj{margin-top:50px;text-align:center;}
/* sc-component-id: sc-kgoBCf */
.dmFQlA{text-align:center;}
/* sc-component-id: sc-kGXeez */
.hGedeg{color:#3e465b;-webkit-text-decoration:none;text-decoration:none;} .hGedeg:hover{color:#3498db;}
/* sc-component-id: sc-kpOJdX */
.cpnbXC{color:#666d71;display:block;font-size:1.6em;margin:0;text-align:center;}
/* sc-component-id: sc-dxgOiQ */
.eNlzGc{color:#666d71;display:inline-block;font-size:14px;margin-top:50px;-webkit-text-decoration:none;text-decoration:none;} .eNlzGc:hover{color:#3498db;}</style><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="icon" href="/favicon-32x32.png?v=b20963e5386fbe2d3f9a949aa901ab35" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#3498db"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=b20963e5386fbe2d3f9a949aa901ab35"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=b20963e5386fbe2d3f9a949aa901ab35"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=b20963e5386fbe2d3f9a949aa901ab35"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=b20963e5386fbe2d3f9a949aa901ab35"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=b20963e5386fbe2d3f9a949aa901ab35"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=b20963e5386fbe2d3f9a949aa901ab35"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=b20963e5386fbe2d3f9a949aa901ab35"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=b20963e5386fbe2d3f9a949aa901ab35"/><title data-react-helmet="true">Kotlin + AWS Lambda + Serverless Framework | Arek Jurasz</title><meta data-react-helmet="true" name="description" content="Dev Blog | Software Engineer"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link as="script" rel="preload" href="/framework-741ade27086b2708e961.js"/><link as="script" rel="preload" href="/d8c6fceef6035ce68615adfef14ec1b550203772-14413fc1ec31b5870784.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-e303bc9294d162a97b8b.js"/><link as="script" rel="preload" href="/2ca085fac04eec258979fa96688fdd6e5c5ad72a-f00de00f4547757df859.js"/><link as="script" rel="preload" href="/app-74ed074e9d7d67137f8f.js"/><link as="script" rel="preload" href="/styles-7d4153d260c0197f0043.js"/><link as="script" rel="preload" href="/webpack-runtime-e095d8b7cd806da303bf.js"/><link as="fetch" rel="preload" href="/page-data/2017-05-28-kotlin-aws-lambda-serverless-framework/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/><link rel="shortcut icon" href="data:image/vnd.microsoft.icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAQAABILAAASCwAAAAAAAAAAAADbmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmjX/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uaNf/bmTP/2pUq/9uZM//bmjT/25o1/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25o1/9ybN//alSv/25o1/+KtXP/bmDL/2pYt/9qVK//cmzb/25o1/9uZM//bmTP/25kz/9uZM//bmTP/25o0/9qVK//YjyD/36RJ/+W1bf/25s//3J07/+CoUv/irFv/2JAh/9mUKP/bmTT/25kz/9uZM//bmTP/25k0/9qVLP/hqVT/8tq3///////pwob/8tq1/+OvYf/ksmb///////Xjyf/jsWX/2pYt/9uZM//bmTP/3Js2/9mTJ//uz6H///////DUq//eo0j/1owZ/+7Nnf/tzJr/140b/9ydPP/syJP///////ThxP/aliz/25o0/9uaNf/alSv/57t5//nv4P/25s//68eR/9ybOP/ltGv/896//9qWL//pwIP/9eLG//nw4//rx5H/2pYu/9uaNP/bmTP/25o0/9mTKP/blzH/57t4//rx5f/ty5n/3Js3//Xjyf/pwYX/+/Tq/+rDif/cnDn/2ZIl/9uZNP/bmTP/25kz/9uZM//bmjX/25kz/9iRJP/ZlCr/3Z9A/9mUKf/z38D/5bRs/9iRJf/YkST/25gx/9yaNv/bmTP/25kz/9uZM//bmTP/25kz/9uZM//cmjb/25o0/9uYMP/bmDH/3Z4//9ybOf/bmDH/3Js3/9uZNP/bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTT/25kz/9uYMP/bmDH/25k0/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTT/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/25kz/9uZM//bmTP/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=="/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div><section class="sc-htpNat bvxbLs"><header class="sc-iwsKbI cdEpUV"><h1 class="sc-bZQynM iSYTTb"><a class="sc-dnqmqq gDybXa" href="/">Arek Jurasz</a></h1><p class="sc-gzVnrw sc-htoDjs dIQAlg">Software Engineer</p><div class="sc-ifAKCX cMSLWU"><a href="https://twitter.com/arekjurasz" target="_blank" rel="noopener" class="sc-EHOje ijxtcw"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg></a><a href="https://github.com/ajurasz" target="_blank" rel="noopener" class="sc-EHOje ijxtcw"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a><a href="https://www.linkedin.com/in/arkadiusz-jurasz/" target="_blank" rel="noopener" class="sc-EHOje ijxtcw"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg></a><a href="https://ajurasz.github.io/rss.xml" target="_blank" rel="noopener" class="sc-EHOje ijxtcw"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></div></header></section><section class="sc-htpNat bvxbLs"><div class="sc-jTzLTM iQIAOc"><div class="sc-gqjmRU iMnMOA"><h1>Kotlin + AWS Lambda + Serverless Framework</h1><p>May 28, 2017</p><span></span></div><article class="sc-gZMcBi cLxazo"><div><p>Some time ago I came across the following tweet.</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/e087ba82deeb3973414aa247f4b459e6/f0d01/tweet_aws_kotlin.jpg"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin: 15px -30px !important max-width: 581px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 47.42857142857142%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAECAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHZdqESD//EABYQAAMAAAAAAAAAAAAAAAAAABESIP/aAAgBAQABBQILX//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABgQAAIDAAAAAAAAAAAAAAAAAAABIDFB/9oACAEBAAY/AtKcf//EABwQAQACAQUAAAAAAAAAAAAAAAEAEEERITFh0f/aAAgBAQABPyHTsB55gp7Qems1/9oADAMBAAIAAwAAABDDz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EAB0QAQABAwUAAAAAAAAAAAAAAAEAETFxEEFhgbH/2gAIAQEAAT8QrqOVqEgvKzdjMMlvMb9w8Gn/2Q=='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="tweet_aws_kotlin"
        title=""
        src="/static/e087ba82deeb3973414aa247f4b459e6/f0d01/tweet_aws_kotlin.jpg"
        srcset="/static/e087ba82deeb3973414aa247f4b459e6/e52aa/tweet_aws_kotlin.jpg 175w,
/static/e087ba82deeb3973414aa247f4b459e6/70ebb/tweet_aws_kotlin.jpg 350w,
/static/e087ba82deeb3973414aa247f4b459e6/f0d01/tweet_aws_kotlin.jpg 581w"
        sizes="(max-width: 581px) 100vw, 581px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>There were two things that took my attention - kotlin and Rekognition.</p>
<!-- end -->
<p>First one is a “new” (it’s relly developed by over 6 years now) JVM language created by JetBrains, company that stands behind great tooling for developers of different professions. The second is an AWS service, this is how it is described on their page</p>
<blockquote>
<p>Amazon Rekognition is a service that makes it easy to add image analysis to your applications. With Rekognition, you can detect objects, scenes faces; search and compare faces, and identify inappropriate content in images. Rekognition’s API enables you to quickly add sophisticated deep learning-based visual search and image classification to your applications.</p>
</blockquote>
<p>as we will see soon this API is very easy to use.</p>
<h2>Why</h2>
<p>At this point for me, it was the first contact with pretty nice and interesting example of AWS Lambda usage created by <a href="https://twitter.com/VladimirBudilov">Vladimir Budilov</a> (here is a  <a href="https://github.com/awslabs/serverless-photo-recognition">github</a> repository). For these who are not familiar with AWS Lambda term -  it is a new category of cloud computing services called FaaS (function as a service). It stands next to IaaS (infrastructure as a service), PaaS (platform as a service) and SaaS (software as a service) it is also referred as Serverless architecture. In short, you focus only on your business logic and don’t care about provisioning and managing servers.</p>
<p>
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin: 15px -30px !important max-width: 700px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 50.28571428571429%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMBBP/EABYBAQEBAAAAAAAAAAAAAAAAAAIDBP/aAAwDAQACEAMQAAAB7Lazqq65/8QAGRAAAwADAAAAAAAAAAAAAAAAAAECEBEh/9oACAEBAAEFAt2dHNN5/8QAFhEBAQEAAAAAAAAAAAAAAAAAARAR/9oACAEDAQE/AQyf/8QAFxEBAAMAAAAAAAAAAAAAAAAAAQIDEP/aAAgBAgEBPwGVi5//xAAaEAACAgMAAAAAAAAAAAAAAAABMQACICEi/9oACAEBAAY/AmXD0XNWw//EABoQAQACAwEAAAAAAAAAAAAAAAEAEDFRcdH/2gAIAQEAAT8hHoQeqhqexw9r/9oADAMBAAIAAwAAABD43//EABgRAAIDAAAAAAAAAAAAAAAAAAABETFh/9oACAEDAQE/EE0Jw//EABgRAAIDAAAAAAAAAAAAAAAAAAABEVFh/9oACAECAQE/EMMh2f/EABwQAAICAgMAAAAAAAAAAAAAAAABETEhQVFx8P/aAAgBAQABPxBe4x89EqpP0zEWOiOpVg0fH2Kj/9k='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="faas_diagram"
        title=""
        src="/static/75f2521335608d5d448030d8d8111009/29d31/faas_diagram.jpg"
        srcset="/static/75f2521335608d5d448030d8d8111009/e52aa/faas_diagram.jpg 175w,
/static/75f2521335608d5d448030d8d8111009/70ebb/faas_diagram.jpg 350w,
/static/75f2521335608d5d448030d8d8111009/29d31/faas_diagram.jpg 700w,
/static/75f2521335608d5d448030d8d8111009/d5834/faas_diagram.jpg 801w"
        sizes="(max-width: 700px) 100vw, 700px"
      />
    </span>
  </span>
  
<sub>Source: Deploy microservice using Amazon Web Services S3, API Gateway, Lambda and Couchbase by Arun Gupta (<a href="https://www.youtube.com/watch?v=eT4EaU2mfL0">https://www.youtube.com/watch?v=eT4EaU2mfL0</a>)</sub></p>
<p>After analysing <a href="https://github.com/awslabs/serverless-photo-recognition">serverless-photo-recognition</a> repository I felt urgent need to write something of my own. One thing that I considered not to be very concise was a setup step. The author created setup <a href="https://github.com/awslabs/serverless-photo-recognition/blob/master/setup/setupEnvironment.sh">script</a> which is very verbose. So let’s start by making this process a lot more easier (to make and understand - for people not so familiar with AWS platform).</p>
<h2>Serverless framework</h2>
<p><a href="https://serverless.com/">Serverless framework</a> is a cli tool that creates great abstraction over <a href="https://aws.amazon.com/cloudformation/">AWS CloudFormation</a> and automates the whole process of setting up cloud infrastructure required by our functions. We start by installing <code class="language-text">serverless framework</code></p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> -g serverless</code></pre></div>
<p>then a good idea is to create dedicated AWS user that will be used on behalf of <code class="language-text">serverless framework</code>. Exact instruction of how to accomplish this can be found <a href="https://serverless.com/framework/docs/providers/aws/guide/credentials/">here</a>. In my case, this user hides behind <code class="language-text">sless</code> AWS cli profile name - <a href="https://github.com/ajurasz/ascii-less-gallery/blob/58ad818d1d0d7131b4cb5ad9e027cea815197656/serverless.yml#L6">see here</a>. All configuration is placed in one file <code class="language-text">serverless.yml</code>
where we first define <code class="language-text">provider</code></p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">provider</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> aws
  <span class="token key atrule">runtime</span><span class="token punctuation">:</span> java8
  <span class="token key atrule">profiles</span><span class="token punctuation">:</span> sless
  <span class="token key atrule">timeout</span><span class="token punctuation">:</span> <span class="token number">60</span>
  <span class="token key atrule">environment</span><span class="token punctuation">:</span>
    <span class="token key atrule">DYNAMODB_USER_TABLE</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>self<span class="token punctuation">:</span>service<span class="token punctuation">}</span><span class="token punctuation">-</span>$<span class="token punctuation">{</span>opt<span class="token punctuation">:</span>stage<span class="token punctuation">,</span> self<span class="token punctuation">:</span>provider.stage<span class="token punctuation">}</span><span class="token punctuation">-</span>user
    <span class="token key atrule">ES_DOMAIN_NAME</span><span class="token punctuation">:</span> es<span class="token punctuation">-</span>gallery
    <span class="token key atrule">REDIS_URL</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>file(serverless<span class="token punctuation">-</span>config.yml)<span class="token punctuation">:</span>$<span class="token punctuation">{</span>opt<span class="token punctuation">:</span>stage<span class="token punctuation">,</span> self<span class="token punctuation">:</span>provider.stage<span class="token punctuation">}</span>.RedisUrl<span class="token punctuation">}</span>
    <span class="token key atrule">REDIS_PORT</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>file(serverless<span class="token punctuation">-</span>config.yml)<span class="token punctuation">:</span>$<span class="token punctuation">{</span>opt<span class="token punctuation">:</span>stage<span class="token punctuation">,</span> self<span class="token punctuation">:</span>provider.stage<span class="token punctuation">}</span>.RedisPort<span class="token punctuation">}</span>
    <span class="token key atrule">ES_URL</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>file(serverless<span class="token punctuation">-</span>config.yml)<span class="token punctuation">:</span>$<span class="token punctuation">{</span>opt<span class="token punctuation">:</span>stage<span class="token punctuation">,</span> self<span class="token punctuation">:</span>provider.stage<span class="token punctuation">}</span>.ElasticsearchUrl<span class="token punctuation">}</span>
  <span class="token key atrule">iamRoleStatements</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">Effect</span><span class="token punctuation">:</span> <span class="token string">"Allow"</span>
      <span class="token key atrule">Action</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token string">"lambda:InvokeFunction"</span>
      <span class="token key atrule">Resource</span><span class="token punctuation">:</span> <span class="token string">"*"</span>
    <span class="token punctuation">-</span> <span class="token key atrule">Effect</span><span class="token punctuation">:</span> <span class="token string">"Allow"</span>
      <span class="token key atrule">Action</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token string">"rekognition:DetectLabels"</span>
      <span class="token key atrule">Resource</span><span class="token punctuation">:</span> <span class="token string">"*"</span>
    <span class="token punctuation">-</span> <span class="token key atrule">Effect</span><span class="token punctuation">:</span> <span class="token string">"Allow"</span>
      <span class="token key atrule">Action</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token string">"es:ESHttpDelete"</span>
        <span class="token punctuation">-</span> <span class="token string">"es:ESHttpGet"</span>
        <span class="token punctuation">-</span> <span class="token string">"es:ESHttpPost"</span>
        <span class="token punctuation">-</span> <span class="token string">"es:ESHttpPut"</span>
      <span class="token key atrule">Resource</span><span class="token punctuation">:</span> <span class="token string">"arn:aws:es:${opt:region, self:provider.region}:*:domain/${self:provider.environment.ES_DOMAIN_NAME}/*"</span>
    <span class="token punctuation">-</span> <span class="token key atrule">Effect</span><span class="token punctuation">:</span> Allow
      <span class="token key atrule">Action</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token string">"dynamodb:GetItem"</span>
        <span class="token punctuation">-</span> <span class="token string">"dynamodb:PutItem"</span>
      <span class="token key atrule">Resource</span><span class="token punctuation">:</span> <span class="token string">"arn:aws:dynamodb:${opt:region, self:provider.region}:*:table/${self:provider.environment.DYNAMODB_USER_TABLE}"</span></code></pre></div>
<p>this is a place where we can configure mentioned AWS cli profile, runtime environment, extend the limit of our functions execution time to 60 sec, define environment variables that will be accessible from within our functions and also we can define a security policy for a lambda role created automatically by <code class="language-text">serverless</code>. From above snippet, we see that security statements were defined for lambda, elasticsearch, rekognition and dynamodb services, specifying what action we can execute on them.</p>
<h2>Lambda in action</h2>
<p>I wrote a simple CRD (no update) functions with custom authentication mechanism - probably using <a href="https://aws.amazon.com/cognito/">AWS Cognito</a> would be a preferred way to go but I wanted to check how flexible are these lambda functions in terms of implementing own authentication. Application architecture is following</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/c345b9c56b520224ea049671d45bb9b6/a3767/architecture_aws_lambda.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin: 15px -30px !important max-width: 700px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 63.42857142857142%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAACBUlEQVQ4y41Sy24TQRDcf+UvuCDxEAiRExLHXLhxRlzIiRwclhAngFkpmNixSRyMHezdmZ3ZeRU1Y29iohwyUql7e2qqH9tZCOEEQI+2oC1c8EXjHGELv461dxExthkP1/534n6GG8cTob+b0B4Sr/zXH0Y4OK1w2yHvZbZ2bNTyzvnGBy/nF76ajryhb4zxQghvrY25fDGc+sm8TD7f+bYGwvF7qxWMQTjTQPGq/rYD8fMzmsi2BoZxY22qolNMcDS4XHXDysN1+THBi2yj05TGEHJ4hHryAzalBRaiRtM0iXjY/43BxWL1yIf2WavxPAkqpX0ssvq1B6WXqM+OIWdnkKSq6RBq/BUNfbbP5wajaYn8ZNHOLbRdEs+ymHk2m3N+Fuf7r7BcnkN337LlfQgS9ekhdG8H0gFluUwFdY5n2N4d3yb49Krl1C7nrjkroRqIWkHQl3/GqEY98GdBSgnHmPceti6TvdHyk2xDPUWNdzEQfzkEKXpwAP3lHXScbVVSmGMYdmHeb5Hno9qm4KP/BQkuddo7x+yS1dTlX4j5BRMFVBQ0zkNdTiAH3cRpK1xrPGwFDeHS5jiXbFxKFb/7HWc/vXE6/nCfsqX79d659SJEMUs8yHCHY6zBHc/jKNil8h6R08+ZNq+1zpVpki+VygXh431AHnktd2XDx7CK04Z7/wDGsen+Gr0cggAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="architecture_aws_lambda"
        title=""
        src="/static/c345b9c56b520224ea049671d45bb9b6/8c557/architecture_aws_lambda.png"
        srcset="/static/c345b9c56b520224ea049671d45bb9b6/4edbd/architecture_aws_lambda.png 175w,
/static/c345b9c56b520224ea049671d45bb9b6/13ae7/architecture_aws_lambda.png 350w,
/static/c345b9c56b520224ea049671d45bb9b6/8c557/architecture_aws_lambda.png 700w,
/static/c345b9c56b520224ea049671d45bb9b6/e996b/architecture_aws_lambda.png 1050w,
/static/c345b9c56b520224ea049671d45bb9b6/a3767/architecture_aws_lambda.png 1210w"
        sizes="(max-width: 700px) 100vw, 700px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>I believe that above diagram is self-explanatory so let’s dive into one of the functions. <a href="https://github.com/ajurasz/ascii-less-gallery/blob/master/src/main/kotlin/ajurasz/lambda/gallery/CreateHandler.kt">CreateHandler</a>, the entry point is <code class="language-text">handleRequest</code> function triggered by AWS when an HTTP POST request reaches API Gateway at <code class="language-text">/gallery</code> path.</p>
<div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin">    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">handleRequest</span><span class="token punctuation">(</span>input<span class="token operator">:</span> Request<span class="token punctuation">,</span> context<span class="token operator">:</span> Context<span class="token punctuation">)</span><span class="token operator">:</span> String <span class="token punctuation">{</span>
        LOG<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"input(\n<span class="token interpolation variable">$input</span>\n)"</span><span class="token punctuation">)</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>input<span class="token punctuation">.</span>base64Image <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token punctuation">(</span>input<span class="token punctuation">.</span>base64Image <span class="token keyword">as</span> String<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isBlank</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token function">response</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token string">"Invalid identify request: no or empty 'base64Image' field supplied"</span><span class="token punctuation">)</span>

        <span class="token keyword">val</span> imageInBytes <span class="token operator">=</span> <span class="token function">base64ToBytes</span><span class="token punctuation">(</span>input<span class="token punctuation">.</span>base64Image<span class="token operator">!!</span><span class="token punctuation">)</span>
        <span class="token keyword">val</span> labels <span class="token operator">=</span> rekognitionService<span class="token punctuation">.</span><span class="token function">imageLabels</span><span class="token punctuation">(</span>imageInBytes<span class="token punctuation">)</span>

        <span class="token keyword">val</span> galleryItem <span class="token operator">=</span> <span class="token function">createGalleryItem</span><span class="token punctuation">(</span>asciiService<span class="token punctuation">,</span> imageInBytes<span class="token punctuation">,</span> labels<span class="token punctuation">)</span>
        <span class="token keyword">val</span> result <span class="token operator">=</span> esService<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>input<span class="token punctuation">.</span>principalId<span class="token operator">!!</span><span class="token punctuation">,</span> galleryItem<span class="token punctuation">)</span>

        <span class="token keyword">when</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token boolean">true</span> <span class="token operator">-></span> <span class="token keyword">return</span> galleryItem<span class="token punctuation">.</span>id
            <span class="token keyword">else</span> <span class="token operator">-></span> <span class="token keyword">return</span> <span class="token function">response</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token string">"Failed to save image"</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span></code></pre></div>
<p>In this function, we validate incoming request to check if base64 encoded image string exists and is not blank. Then encoded image is converted to <code class="language-text">byte</code> array and passed to Rekognition service. This service is a wrapper around AWS Rekognition service to simplify interaction with it.</p>
<div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin">    <span class="token keyword">fun</span> <span class="token function">imageLabels</span><span class="token punctuation">(</span>image<span class="token operator">:</span> ByteArray<span class="token punctuation">)</span><span class="token operator">:</span> List<span class="token operator">&lt;</span>String<span class="token operator">></span> <span class="token punctuation">{</span>
        LOG<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"Recognize image labels"</span><span class="token punctuation">)</span>
        <span class="token keyword">val</span> response <span class="token operator">=</span> amazonRekognition<span class="token punctuation">.</span><span class="token function">detectLabels</span><span class="token punctuation">(</span><span class="token function">DetectLabelsRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">withMaxLabels</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">withMinConfidence</span><span class="token punctuation">(</span><span class="token number">60f</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">withImage</span><span class="token punctuation">(</span><span class="token function">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withBytes</span><span class="token punctuation">(</span>ByteBuffer<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span>image<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

        <span class="token keyword">return</span> response<span class="token operator">?</span><span class="token punctuation">.</span>labels<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>name <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">orEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span></code></pre></div>
<p>As mentioned at the beginning, using AWS Rekognition service we were able to define a sophisticated deep learning-based operation of labelling objects present on a given image just in few lines of code.
When using serverless framework we need to create a configuration for each function. Configuration for <code class="language-text">CreateHandler</code> function is following</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml">  <span class="token key atrule">create</span><span class="token punctuation">:</span>
    <span class="token key atrule">handler</span><span class="token punctuation">:</span> ajurasz.lambda.gallery.CreateHandler
    <span class="token key atrule">events</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">http</span><span class="token punctuation">:</span>
          <span class="token key atrule">path</span><span class="token punctuation">:</span> gallery
          <span class="token key atrule">method</span><span class="token punctuation">:</span> post
          <span class="token key atrule">integration</span><span class="token punctuation">:</span> lambda
          <span class="token key atrule">request</span><span class="token punctuation">:</span>
            <span class="token key atrule">passThrough</span><span class="token punctuation">:</span> WHEN_NO_TEMPLATES
            <span class="token key atrule">template</span><span class="token punctuation">:</span>
              <span class="token key atrule">image/png</span><span class="token punctuation">:</span> <span class="token string">'{ "operation" : "create", "base64Image" : "$input.body", "principalId" : "$context.authorizer.principalId" }'</span>
          <span class="token key atrule">authorizer</span><span class="token punctuation">:</span>
            <span class="token key atrule">name</span><span class="token punctuation">:</span> auth
            <span class="token key atrule">resultTtlInSeconds</span><span class="token punctuation">:</span> <span class="token number">30</span>
            <span class="token key atrule">identitySource</span><span class="token punctuation">:</span> method.request.header.token</code></pre></div>
<p>we see that this function is triggered by HTTP specific event - POST request to <code class="language-text">/gallery</code> path. This configuration is little bit more complicated than for other functions and this is because we are not using default <code class="language-text">lambda-proxy</code> integration (integration between API Gateway and Lambda) as we need to customize it to handle binary data. More information about handling binary data in AWS Lambda can be found <a href="https://aws.amazon.com/blogs/compute/binary-support-for-api-integrations-with-amazon-api-gateway/">here</a>. We also secured our function with <code class="language-text">auth</code> function that will be invoked before target function to check if supplied token is valid. <code class="language-text">auth</code> function response is cached for 30 sec, the cache key is a <code class="language-text">identitySource</code>. Usually when using proxy approach the whole request is forwarded to our function and configuration is as easy as</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml">  <span class="token key atrule">list</span><span class="token punctuation">:</span>
    <span class="token key atrule">handler</span><span class="token punctuation">:</span> ajurasz.lambda.gallery.ListHandler
    <span class="token key atrule">events</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">http</span><span class="token punctuation">:</span>
          <span class="token key atrule">path</span><span class="token punctuation">:</span> gallery
          <span class="token key atrule">method</span><span class="token punctuation">:</span> get</code></pre></div>
<p>or</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml">  <span class="token key atrule">delete</span><span class="token punctuation">:</span>
    <span class="token key atrule">handler</span><span class="token punctuation">:</span> ajurasz.lambda.gallery.DeleteHandler
    <span class="token key atrule">events</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">http</span><span class="token punctuation">:</span>
          <span class="token key atrule">path</span><span class="token punctuation">:</span> gallery/<span class="token punctuation">{</span>id<span class="token punctuation">}</span>
          <span class="token key atrule">method</span><span class="token punctuation">:</span> delete
          <span class="token key atrule">authorizer</span><span class="token punctuation">:</span>
            <span class="token key atrule">name</span><span class="token punctuation">:</span> auth
            <span class="token key atrule">resultTtlInSeconds</span><span class="token punctuation">:</span> <span class="token number">30</span>
            <span class="token key atrule">identitySource</span><span class="token punctuation">:</span> method.request.header.token</code></pre></div>
<p>when we want to secure our endpoint.</p>
<h2>Testing</h2>
<p>With good encapsulation, you can test a lot. In my case, I only was not able to test Rekognition and DynamoDB services so had to use mocks. Recently (again, thank you Twitter) I found that <a href="https://github.com/allegro">allegro tech team</a> open sourced <a href="https://github.com/allegro/embedded-elasticsearch">embedded-elasticsearch</a> to make unit and integration testing easier and more reliable.</p>
<h2>Deployment</h2>
<p>This can obviously be a part of CI/CD pipeline as when everything is ready you need to execute just two commands</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">./gradlew <span class="token builtin class-name">test</span>
serverless deploy</code></pre></div>
<p>this could be simplified to just one command by executing <code class="language-text">serverless</code> command from within gradle task.</p>
<h2>Conclusion</h2>
<p>Personally, I wouldn’t consider building my whole application as functions from one simple reason - vendor locking (<a href="https://startupsventurecapital.com/firebase-costs-increased-by-7-000-81dc0a27271d">this article</a> is kind of “lessons learned” type in terms of vendor locking). But this is a great option when you need to run some simple function triggered by different events somewhere on the web. There is still some lack in case of debugging (or I didn’t yet discover how to do it properly) these functions - at this point I will say only - <em>logger is your friend</em>.</p></div></article><div class="sc-cSHVUG iJKMsj"><h2 class="sc-bdVaJa cBVFwB">Share This Post</h2><a href="https://www.facebook.com/sharer/sharer.php?u=" target="_blank" aria-label="Share on Facebook" rel="noopener" class="sc-kAzzGY fDOfVi"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path></svg></a><a href="https://twitter.com/intent/tweet?text=Kotlin%20+%20AWS%20Lambda%20+%20Serverless%20Framework&amp;url=" target="_blank" aria-label="Share on Twitter" rel="noopener" class="sc-kAzzGY fDOfVi"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg></a><a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=&amp;title=Kotlin%20+%20AWS%20Lambda%20+%20Serverless%20Framework" target="_blank" aria-label="Share on LinkedIn" rel="noopener" class="sc-kAzzGY fDOfVi"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg></a><a href="mailto:?subject=Kotlin%20+%20AWS%20Lambda%20+%20Serverless%20Framework&amp;body=" aria-label="Share by Email" rel="noopener" class="sc-kAzzGY fDOfVi"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg></a></div></div><div class="sc-jzJRlG eAaXEV"><a rel="prev" class="sc-VigVT bGukrS" href="/2016-12-15-homemade-central-heating-temperature-monitoring/">← <!-- -->Homemade central heating temperature monitoring</a><a rel="next" class="sc-VigVT bGukrS" href="/2018-09-09-adding-deb-packages-to-cloud-foundry-instances/">Adding deb packages to Cloud Foundry instances<!-- --> →</a></div></section></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-70225806-1', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2017-05-28-kotlin-aws-lambda-serverless-framework/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-303683f6c6a5fb752dca.js"],"app":["/app-74ed074e9d7d67137f8f.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-36dc033f967ae9fe9cda.js"],"component---src-pages-404-js":["/component---src-pages-404-js-eb0bdeafcc9777c65a54.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-e303bc9294d162a97b8b.js"],"component---src-templates-index-js":["/component---src-templates-index-js-8594de3e8d4418bd418f.js"]};/*]]>*/</script><script src="/polyfill-303683f6c6a5fb752dca.js" nomodule=""></script><script src="/webpack-runtime-e095d8b7cd806da303bf.js" async=""></script><script src="/styles-7d4153d260c0197f0043.js" async=""></script><script src="/app-74ed074e9d7d67137f8f.js" async=""></script><script src="/2ca085fac04eec258979fa96688fdd6e5c5ad72a-f00de00f4547757df859.js" async=""></script><script src="/component---src-templates-blog-post-js-e303bc9294d162a97b8b.js" async=""></script><script src="/d8c6fceef6035ce68615adfef14ec1b550203772-14413fc1ec31b5870784.js" async=""></script><script src="/framework-741ade27086b2708e961.js" async=""></script></body></html>